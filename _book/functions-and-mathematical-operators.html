<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Functions and mathematical operators | Introduction to Programming with R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Functions and mathematical operators | Introduction to Programming with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Functions and mathematical operators | Introduction to Programming with R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Reto Stauffer, Thorsten Simon" />


<meta name="date" content="2019-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectors.html"/>
<link rel="next" href="style-guide.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.5/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#programming"><i class="fa fa-check"></i><b>1.1</b> Programming</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-not-natural-languages"><i class="fa fa-check"></i><b>1.2</b> Why not Natural Languages?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#history-of-programming"><i class="fa fa-check"></i><b>1.3</b> History of Programming</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#number-of-languages"><i class="fa fa-check"></i><b>1.4</b> Number of Languages</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#the-r-programming-language"><i class="fa fa-check"></i><b>1.5</b> The <em>R</em> Programming Language</a><ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#what-is-r"><i class="fa fa-check"></i><b>1.5.1</b> What is <em>R</em>?</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#open-science"><i class="fa fa-check"></i><b>1.5.2</b> Open Science</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction.html"><a href="introduction.html#r-on-the-job-market"><i class="fa fa-check"></i><b>1.5.3</b> <em>R</em> on the job market</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#the-r-ecosystem"><i class="fa fa-check"></i><b>1.6</b> The <em>R</em> Ecosystem</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#examples"><i class="fa fa-check"></i><b>1.7</b> Examples</a><ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#empirical-mean-and-quartiles"><i class="fa fa-check"></i><b>1.7.1</b> Empirical Mean and Quartiles</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#statistical-modeling"><i class="fa fa-check"></i><b>1.7.2</b> Statistical Modeling</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction.html"><a href="introduction.html#spatial-data"><i class="fa fa-check"></i><b>1.7.3</b> Spatial Data</a></li>
<li class="chapter" data-level="1.7.4" data-path="introduction.html"><a href="introduction.html#geographical-data"><i class="fa fa-check"></i><b>1.7.4</b> Geographical Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#interfaces-and-development-environments-ide"><i class="fa fa-check"></i><b>2.1</b> Interfaces and Development Environments (IDE)</a></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#interactive-examples"><i class="fa fa-check"></i><b>2.2</b> Interactive Examples</a><ul>
<li class="chapter" data-level="2.2.1" data-path="installation.html"><a href="installation.html#r-as-a-basic-calculator"><i class="fa fa-check"></i><b>2.2.1</b> R as a basic calculator</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="getting-help.html"><a href="getting-help.html"><i class="fa fa-check"></i><b>3</b> Getting Help</a><ul>
<li class="chapter" data-level="3.1" data-path="getting-help.html"><a href="getting-help.html#accessing-r-documentationhelp-pages"><i class="fa fa-check"></i><b>3.1</b> Accessing R documentation/help pages</a></li>
<li class="chapter" data-level="3.2" data-path="getting-help.html"><a href="getting-help.html#package-documentation-and-vignettes"><i class="fa fa-check"></i><b>3.2</b> Package documentation and vignettes</a></li>
<li class="chapter" data-level="3.3" data-path="getting-help.html"><a href="getting-help.html#websites"><i class="fa fa-check"></i><b>3.3</b> Websites</a></li>
<li class="chapter" data-level="3.4" data-path="getting-help.html"><a href="getting-help.html#ask-the-community"><i class="fa fa-check"></i><b>3.4</b> Ask the community</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html"><i class="fa fa-check"></i><b>4</b> Nuts and Bolts</a><ul>
<li class="chapter" data-level="4.1" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#atomic-classes"><i class="fa fa-check"></i><b>4.1</b> Atomic classes</a><ul>
<li class="chapter" data-level="4.1.1" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#know-the-basics"><i class="fa fa-check"></i><b>4.1.1</b> Know the basics!</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#input-and-output"><i class="fa fa-check"></i><b>4.2</b> Input and Output</a></li>
<li class="chapter" data-level="4.3" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#atomic-classes-1"><i class="fa fa-check"></i><b>4.3</b> Atomic Classes</a><ul>
<li class="chapter" data-level="4.3.1" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#double"><i class="fa fa-check"></i><b>4.3.1</b> Double</a></li>
<li class="chapter" data-level="4.3.2" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#integers"><i class="fa fa-check"></i><b>4.3.2</b> Integers</a></li>
<li class="chapter" data-level="4.3.3" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#characters"><i class="fa fa-check"></i><b>4.3.3</b> Characters</a></li>
<li class="chapter" data-level="4.3.4" data-path="nuts-and-bolts.html"><a href="nuts-and-bolts.html#checking-classes"><i class="fa fa-check"></i><b>4.3.4</b> Checking classes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a><ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#create-vectors"><i class="fa fa-check"></i><b>5.1</b> Create Vectors</a></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#vectors-1"><i class="fa fa-check"></i><b>5.2</b> Vectors</a></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#missing-values"><i class="fa fa-check"></i><b>5.3</b> Missing values</a></li>
<li class="chapter" data-level="5.4" data-path="vectors.html"><a href="vectors.html#coercion"><i class="fa fa-check"></i><b>5.4</b> Coercion</a></li>
<li class="chapter" data-level="5.5" data-path="vectors.html"><a href="vectors.html#attributes"><i class="fa fa-check"></i><b>5.5</b> Attributes</a></li>
<li class="chapter" data-level="5.6" data-path="vectors.html"><a href="vectors.html#vector-attributes"><i class="fa fa-check"></i><b>5.6</b> Vector Attributes</a></li>
<li class="chapter" data-level="5.7" data-path="vectors.html"><a href="vectors.html#vector-subsetting"><i class="fa fa-check"></i><b>5.7</b> Vector Subsetting</a><ul>
<li class="chapter" data-level="5.7.1" data-path="vectors.html"><a href="vectors.html#subsetting-by-indizes"><i class="fa fa-check"></i><b>5.7.1</b> Subsetting by indizes</a></li>
<li class="chapter" data-level="5.7.2" data-path="vectors.html"><a href="vectors.html#subsetting-by-name"><i class="fa fa-check"></i><b>5.7.2</b> Subsetting by name</a></li>
<li class="chapter" data-level="5.7.3" data-path="vectors.html"><a href="vectors.html#subsetting-by-logical-vectors"><i class="fa fa-check"></i><b>5.7.3</b> Subsetting by logical vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="vectors.html"><a href="vectors.html#relational-and-logical-operators"><i class="fa fa-check"></i><b>5.8</b> Relational and Logical Operators</a><ul>
<li class="chapter" data-level="5.8.1" data-path="vectors.html"><a href="vectors.html#rational-operators"><i class="fa fa-check"></i><b>5.8.1</b> Rational Operators</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="vectors.html"><a href="vectors.html#practical-session"><i class="fa fa-check"></i><b>5.9</b> Practical Session</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html"><i class="fa fa-check"></i><b>6</b> Functions and mathematical operators</a><ul>
<li class="chapter" data-level="6.1" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#functions"><i class="fa fa-check"></i><b>6.1</b> Functions</a></li>
<li class="chapter" data-level="6.2" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#when-should-i-use-functions"><i class="fa fa-check"></i><b>6.2</b> When should I use functions?</a></li>
<li class="chapter" data-level="6.3" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#the-structure-of-functions"><i class="fa fa-check"></i><b>6.3</b> The structure of functions</a></li>
<li class="chapter" data-level="6.4" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#functions-in-r"><i class="fa fa-check"></i><b>6.4</b> Functions in <em>R</em></a></li>
<li class="chapter" data-level="6.5" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#calling-functions"><i class="fa fa-check"></i><b>6.5</b> Calling functions</a></li>
<li class="chapter" data-level="6.6" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#naming-functions"><i class="fa fa-check"></i><b>6.6</b> Naming functions</a></li>
<li class="chapter" data-level="6.7" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#functions-in-real-life"><i class="fa fa-check"></i><b>6.7</b> Functions In Real Life</a></li>
<li class="chapter" data-level="6.8" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#declare-functions-in-r"><i class="fa fa-check"></i><b>6.8</b> Declare Functions in <em>R</em></a></li>
<li class="chapter" data-level="6.9" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#the-null-value-in-r"><i class="fa fa-check"></i><b>6.9</b> The NULL value in <em>R</em></a></li>
<li class="chapter" data-level="6.10" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#back-to-functions"><i class="fa fa-check"></i><b>6.10</b> Back to functions</a><ul>
<li class="chapter" data-level="6.10.1" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#multiple-input-arguments"><i class="fa fa-check"></i><b>6.10.1</b> Multiple input arguments</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#practical-session-1"><i class="fa fa-check"></i><b>6.11</b> Practical Session</a><ul>
<li class="chapter" data-level="6.11.1" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#exercise-1"><i class="fa fa-check"></i><b>6.11.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.11.2" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#exercise-2"><i class="fa fa-check"></i><b>6.11.2</b> Exercise 2</a></li>
<li class="chapter" data-level="6.11.3" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#exercise-3"><i class="fa fa-check"></i><b>6.11.3</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#function-recap"><i class="fa fa-check"></i><b>6.12</b> Function Recap</a></li>
<li class="chapter" data-level="6.13" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#developing-functions"><i class="fa fa-check"></i><b>6.13</b> Developing Functions</a><ul>
<li class="chapter" data-level="6.13.1" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#develop-functions-in-steps"><i class="fa fa-check"></i><b>6.13.1</b> Develop functions in steps</a></li>
<li class="chapter" data-level="6.13.2" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#step-2-pack-parts-of-your-code-into-a-function"><i class="fa fa-check"></i><b>6.13.2</b> Step 2: pack parts of your code into a function</a></li>
<li class="chapter" data-level="6.13.3" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#step-3-adjust-your-function"><i class="fa fa-check"></i><b>6.13.3</b> Step 3: adjust your function</a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="functions-and-mathematical-operators.html"><a href="functions-and-mathematical-operators.html#advanced-use-script-files"><i class="fa fa-check"></i><b>6.14</b> Advanced: use script files</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="style-guide.html"><a href="style-guide.html"><i class="fa fa-check"></i><b>7</b> Style guide</a><ul>
<li class="chapter" data-level="7.0.1" data-path="style-guide.html"><a href="style-guide.html#what-is-a-coding-style"><i class="fa fa-check"></i><b>7.0.1</b> What is a coding style?</a></li>
<li class="chapter" data-level="7.0.2" data-path="style-guide.html"><a href="style-guide.html#special-characters"><i class="fa fa-check"></i><b>7.0.2</b> Special characters</a></li>
<li class="chapter" data-level="7.0.3" data-path="style-guide.html"><a href="style-guide.html#language"><i class="fa fa-check"></i><b>7.0.3</b> Language</a></li>
<li class="chapter" data-level="7.0.4" data-path="style-guide.html"><a href="style-guide.html#script-file-names"><i class="fa fa-check"></i><b>7.0.4</b> Script file names</a></li>
<li class="chapter" data-level="7.0.5" data-path="style-guide.html"><a href="style-guide.html#object-names"><i class="fa fa-check"></i><b>7.0.5</b> Object names</a></li>
<li class="chapter" data-level="7.0.6" data-path="style-guide.html"><a href="style-guide.html#spaces-infix-operators"><i class="fa fa-check"></i><b>7.0.6</b> Spaces: infix operators</a></li>
<li class="chapter" data-level="7.0.7" data-path="style-guide.html"><a href="style-guide.html#spaces-colons"><i class="fa fa-check"></i><b>7.0.7</b> Spaces: colons</a></li>
<li class="chapter" data-level="7.0.8" data-path="style-guide.html"><a href="style-guide.html#spaces-multiple-spaces"><i class="fa fa-check"></i><b>7.0.8</b> Spaces: multiple spaces</a></li>
<li class="chapter" data-level="7.0.9" data-path="style-guide.html"><a href="style-guide.html#spaces-brackets"><i class="fa fa-check"></i><b>7.0.9</b> Spaces: brackets</a></li>
<li class="chapter" data-level="7.0.10" data-path="style-guide.html"><a href="style-guide.html#spaces-commas"><i class="fa fa-check"></i><b>7.0.10</b> Spaces: commas</a></li>
<li class="chapter" data-level="7.0.11" data-path="style-guide.html"><a href="style-guide.html#openingclosing-brackets"><i class="fa fa-check"></i><b>7.0.11</b> Opening/closing brackets</a></li>
<li class="chapter" data-level="7.0.12" data-path="style-guide.html"><a href="style-guide.html#indention"><i class="fa fa-check"></i><b>7.0.12</b> Indention</a></li>
<li class="chapter" data-level="7.0.13" data-path="style-guide.html"><a href="style-guide.html#explicit-return"><i class="fa fa-check"></i><b>7.0.13</b> Explicit return</a></li>
<li class="chapter" data-level="7.0.14" data-path="style-guide.html"><a href="style-guide.html#line-breaks"><i class="fa fa-check"></i><b>7.0.14</b> Line breaks</a></li>
<li class="chapter" data-level="7.0.15" data-path="style-guide.html"><a href="style-guide.html#nested-indention"><i class="fa fa-check"></i><b>7.0.15</b> Nested indention</a></li>
<li class="chapter" data-level="7.0.16" data-path="style-guide.html"><a href="style-guide.html#object-assignment"><i class="fa fa-check"></i><b>7.0.16</b> Object assignment</a></li>
<li class="chapter" data-level="7.0.17" data-path="style-guide.html"><a href="style-guide.html#comments"><i class="fa fa-check"></i><b>7.0.17</b> Comments</a></li>
<li class="chapter" data-level="7.0.18" data-path="style-guide.html"><a href="style-guide.html#all-together"><i class="fa fa-check"></i><b>7.0.18</b> All together</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="control-structures-1.html"><a href="control-structures-1.html"><i class="fa fa-check"></i><b>8</b> Control Structures (1)</a><ul>
<li class="chapter" data-level="8.1" data-path="control-structures-1.html"><a href="control-structures-1.html#logical-operators"><i class="fa fa-check"></i><b>8.1</b> Logical Operators</a></li>
<li class="chapter" data-level="8.2" data-path="control-structures-1.html"><a href="control-structures-1.html#if-conditions"><i class="fa fa-check"></i><b>8.2</b> If conditions</a><ul>
<li class="chapter" data-level="8.2.1" data-path="control-structures-1.html"><a href="control-structures-1.html#conditional-return"><i class="fa fa-check"></i><b>8.2.1</b> Conditional return</a></li>
<li class="chapter" data-level="8.2.2" data-path="control-structures-1.html"><a href="control-structures-1.html#stop-execution"><i class="fa fa-check"></i><b>8.2.2</b> Stop execution</a></li>
<li class="chapter" data-level="8.2.3" data-path="control-structures-1.html"><a href="control-structures-1.html#another-example"><i class="fa fa-check"></i><b>8.2.3</b> Another example</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="control-structures-1.html"><a href="control-structures-1.html#if-else-conditions"><i class="fa fa-check"></i><b>8.3</b> If else conditions</a><ul>
<li class="chapter" data-level="8.3.1" data-path="control-structures-1.html"><a href="control-structures-1.html#multiple-conditions"><i class="fa fa-check"></i><b>8.3.1</b> Multiple conditions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="control-structures-2.html"><a href="control-structures-2.html"><i class="fa fa-check"></i><b>9</b> Control Structures (2)</a><ul>
<li class="chapter" data-level="9.1" data-path="control-structures-2.html"><a href="control-structures-2.html#control-structures"><i class="fa fa-check"></i><b>9.1</b> Control Structures</a></li>
<li class="chapter" data-level="9.2" data-path="control-structures-2.html"><a href="control-structures-2.html#for-loops"><i class="fa fa-check"></i><b>9.2</b> <code>for</code> loops</a></li>
<li class="chapter" data-level="9.3" data-path="control-structures-2.html"><a href="control-structures-2.html#basic-usage"><i class="fa fa-check"></i><b>9.3</b> Basic usage</a></li>
<li class="chapter" data-level="9.4" data-path="control-structures-2.html"><a href="control-structures-2.html#for-loops-over-vectors"><i class="fa fa-check"></i><b>9.4</b> For loops over vectors</a></li>
<li class="chapter" data-level="9.5" data-path="control-structures-2.html"><a href="control-structures-2.html#combine-loops-and-ifelse-conditions"><i class="fa fa-check"></i><b>9.5</b> Combine loops and if/else conditions</a></li>
<li class="chapter" data-level="9.6" data-path="control-structures-2.html"><a href="control-structures-2.html#use-next-and-break"><i class="fa fa-check"></i><b>9.6</b> Use next and break</a><ul>
<li class="chapter" data-level="9.6.1" data-path="control-structures-2.html"><a href="control-structures-2.html#how-to-use-next"><i class="fa fa-check"></i><b>9.6.1</b> How to use next</a></li>
<li class="chapter" data-level="9.6.2" data-path="control-structures-2.html"><a href="control-structures-2.html#how-to-use-break"><i class="fa fa-check"></i><b>9.6.2</b> How to use break</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="control-structures-2.html"><a href="control-structures-2.html#practical-exercises"><i class="fa fa-check"></i><b>9.7</b> Practical exercises</a></li>
<li class="chapter" data-level="9.8" data-path="control-structures-2.html"><a href="control-structures-2.html#looping-over-vector-indices"><i class="fa fa-check"></i><b>9.8</b> Looping over vector indices</a></li>
<li class="chapter" data-level="9.9" data-path="control-structures-2.html"><a href="control-structures-2.html#using-next-and-break"><i class="fa fa-check"></i><b>9.9</b> Using next and break</a></li>
<li class="chapter" data-level="9.10" data-path="control-structures-2.html"><a href="control-structures-2.html#while-loops"><i class="fa fa-check"></i><b>9.10</b> while loops</a></li>
<li class="chapter" data-level="9.11" data-path="control-structures-2.html"><a href="control-structures-2.html#store-interim-results"><i class="fa fa-check"></i><b>9.11</b> Store Interim Results</a></li>
<li class="chapter" data-level="9.12" data-path="control-structures-2.html"><a href="control-structures-2.html#practical-session-2"><i class="fa fa-check"></i><b>9.12</b> Practical Session</a><ul>
<li class="chapter" data-level="9.12.1" data-path="control-structures-2.html"><a href="control-structures-2.html#exercise-1-arithmetic-mean"><i class="fa fa-check"></i><b>9.12.1</b> Exercise 1: Arithmetic mean</a></li>
<li class="chapter" data-level="9.12.2" data-path="control-structures-2.html"><a href="control-structures-2.html#exercise-2-conditional-for-loop"><i class="fa fa-check"></i><b>9.12.2</b> Exercise 2: Conditional for loop</a></li>
<li class="chapter" data-level="9.12.3" data-path="control-structures-2.html"><a href="control-structures-2.html#exercise-3-factorial"><i class="fa fa-check"></i><b>9.12.3</b> Exercise 3: Factorial</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="matrices.html"><a href="matrices.html"><i class="fa fa-check"></i><b>10</b> Matrices</a><ul>
<li class="chapter" data-level="10.1" data-path="matrices.html"><a href="matrices.html#matrices-in-r"><i class="fa fa-check"></i><b>10.1</b> Matrices in <em>R</em></a></li>
<li class="chapter" data-level="10.2" data-path="matrices.html"><a href="matrices.html#create-a-matrix"><i class="fa fa-check"></i><b>10.2</b> Create a matrix</a></li>
<li class="chapter" data-level="10.3" data-path="matrices.html"><a href="matrices.html#fill-by-rowcolumn"><i class="fa fa-check"></i><b>10.3</b> Fill by row/column</a></li>
<li class="chapter" data-level="10.4" data-path="matrices.html"><a href="matrices.html#column-binding-and-row-binding-vectors"><i class="fa fa-check"></i><b>10.4</b> Column-binding and row-binding (vectors)</a></li>
<li class="chapter" data-level="10.5" data-path="matrices.html"><a href="matrices.html#column-binding-and-row-binding-matrices"><i class="fa fa-check"></i><b>10.5</b> Column-binding and row-binding (matrices)</a></li>
<li class="chapter" data-level="10.6" data-path="matrices.html"><a href="matrices.html#matrix-attributes"><i class="fa fa-check"></i><b>10.6</b> Matrix attributes</a></li>
<li class="chapter" data-level="10.7" data-path="matrices.html"><a href="matrices.html#setting-dimension-names"><i class="fa fa-check"></i><b>10.7</b> Setting dimension names (, )</a></li>
<li class="chapter" data-level="10.8" data-path="matrices.html"><a href="matrices.html#set-dimension-names-when-creating-the-object"><i class="fa fa-check"></i><b>10.8</b> Set dimension names when creating the object</a></li>
<li class="chapter" data-level="10.9" data-path="matrices.html"><a href="matrices.html#practical-exercises-part-1"><i class="fa fa-check"></i><b>10.9</b> Practical Exercises (part 1)</a><ul>
<li class="chapter" data-level="10.9.1" data-path="matrices.html"><a href="matrices.html#practical-exercise-2"><i class="fa fa-check"></i><b>10.9.1</b> Practical exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="10.10" data-path="matrices.html"><a href="matrices.html#subsetting-matrices"><i class="fa fa-check"></i><b>10.10</b> Subsetting matrices</a></li>
<li class="chapter" data-level="10.11" data-path="matrices.html"><a href="matrices.html#subsetting-matrices-with-logical-vectors"><i class="fa fa-check"></i><b>10.11</b> Subsetting matrices with logical vectors</a></li>
<li class="chapter" data-level="10.12" data-path="matrices.html"><a href="matrices.html#subsetting-by-name-1"><i class="fa fa-check"></i><b>10.12</b> Subsetting by name</a></li>
<li class="chapter" data-level="10.13" data-path="matrices.html"><a href="matrices.html#non-existing-elements-in-matrices"><i class="fa fa-check"></i><b>10.13</b> Non-existing elements in matrices</a></li>
<li class="chapter" data-level="10.14" data-path="matrices.html"><a href="matrices.html#the-subset-method"><i class="fa fa-check"></i><b>10.14</b> The subset method</a></li>
<li class="chapter" data-level="10.15" data-path="matrices.html"><a href="matrices.html#matrix-arithmetic"><i class="fa fa-check"></i><b>10.15</b> Matrix Arithmetic</a><ul>
<li class="chapter" data-level="10.15.1" data-path="matrices.html"><a href="matrices.html#matrices-and-scalars"><i class="fa fa-check"></i><b>10.15.1</b> Matrices and scalars</a></li>
<li class="chapter" data-level="10.15.2" data-path="matrices.html"><a href="matrices.html#matrices-and-vectors"><i class="fa fa-check"></i><b>10.15.2</b> Matrices and vectors</a></li>
</ul></li>
<li class="chapter" data-level="10.16" data-path="matrices.html"><a href="matrices.html#further-functions"><i class="fa fa-check"></i><b>10.16</b> Further functions</a></li>
<li class="chapter" data-level="10.17" data-path="matrices.html"><a href="matrices.html#practical-exercises-part-2"><i class="fa fa-check"></i><b>10.17</b> Practical Exercises (part 2)</a><ul>
<li class="chapter" data-level="10.17.1" data-path="matrices.html"><a href="matrices.html#practical-exercise-3"><i class="fa fa-check"></i><b>10.17.1</b> Practical exercise 3</a></li>
<li class="chapter" data-level="10.17.2" data-path="matrices.html"><a href="matrices.html#practical-exercise-4"><i class="fa fa-check"></i><b>10.17.2</b> Practical exercise 4</a></li>
<li class="chapter" data-level="10.17.3" data-path="matrices.html"><a href="matrices.html#practical-exercise-5"><i class="fa fa-check"></i><b>10.17.3</b> Practical exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="10.18" data-path="matrices.html"><a href="matrices.html#typical-examples"><i class="fa fa-check"></i><b>10.18</b> Typical Examples</a><ul>
<li class="chapter" data-level="10.18.1" data-path="matrices.html"><a href="matrices.html#convert-matrix-to-data-frame"><i class="fa fa-check"></i><b>10.18.1</b> Convert matrix to data frame</a></li>
<li class="chapter" data-level="10.18.2" data-path="matrices.html"><a href="matrices.html#convert-data-frame-to-matrix"><i class="fa fa-check"></i><b>10.18.2</b> Convert data frame to matrix</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>11</b> Factors</a><ul>
<li class="chapter" data-level="11.1" data-path="factors.html"><a href="factors.html#practical-exercises-1"><i class="fa fa-check"></i><b>11.1</b> Practical Exercises</a><ul>
<li class="chapter" data-level="11.1.1" data-path="factors.html"><a href="factors.html#practical-exercises-1-1"><i class="fa fa-check"></i><b>11.1.1</b> Practical Exercises 1</a></li>
<li class="chapter" data-level="11.1.2" data-path="factors.html"><a href="factors.html#practical-exercises-2"><i class="fa fa-check"></i><b>11.1.2</b> Practical Exercises 2</a></li>
<li class="chapter" data-level="11.1.3" data-path="factors.html"><a href="factors.html#practical-exercises-3"><i class="fa fa-check"></i><b>11.1.3</b> Practical Exercises 3</a></li>
<li class="chapter" data-level="11.1.4" data-path="factors.html"><a href="factors.html#descriptive-data-analysis"><i class="fa fa-check"></i><b>11.1.4</b> Descriptive Data Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>12</b> Lists</a></li>
<li class="chapter" data-level="13" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>13</b> Data frames</a><ul>
<li class="chapter" data-level="13.1" data-path="data-frames.html"><a href="data-frames.html#convert-objects"><i class="fa fa-check"></i><b>13.1</b> Convert Objects</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sort-order.html"><a href="sort-order.html"><i class="fa fa-check"></i><b>14</b> Sort &amp; Order</a><ul>
<li class="chapter" data-level="14.1" data-path="sort-order.html"><a href="sort-order.html#sorting-a-vector"><i class="fa fa-check"></i><b>14.1</b> Sorting a vector</a></li>
<li class="chapter" data-level="14.2" data-path="sort-order.html"><a href="sort-order.html#order-of-a-vector"><i class="fa fa-check"></i><b>14.2</b> Order of a vector</a></li>
<li class="chapter" data-level="14.3" data-path="sort-order.html"><a href="sort-order.html#sort-to-get-order-order-to-sort"><i class="fa fa-check"></i><b>14.3</b> Sort to get order, order to sort</a><ul>
<li class="chapter" data-level="14.3.1" data-path="sort-order.html"><a href="sort-order.html#sort-to-get-order"><i class="fa fa-check"></i><b>14.3.1</b> Sort to get order</a></li>
<li class="chapter" data-level="14.3.2" data-path="sort-order.html"><a href="sort-order.html#order-to-sort"><i class="fa fa-check"></i><b>14.3.2</b> Order to sort</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="sort-order.html"><a href="sort-order.html#sort-a-matrix"><i class="fa fa-check"></i><b>14.4</b> Sort a matrix</a></li>
<li class="chapter" data-level="14.5" data-path="sort-order.html"><a href="sort-order.html#sorting-a-data.frame"><i class="fa fa-check"></i><b>14.5</b> Sorting a data.frame</a></li>
<li class="chapter" data-level="14.6" data-path="sort-order.html"><a href="sort-order.html#practical-exercise"><i class="fa fa-check"></i><b>14.6</b> Practical Exercise</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Programming with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions-and-mathematical-operators" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Functions and mathematical operators</h1>
<p>In this session we will learn how to write (basic) custom functions in <em>R</em>. For some of the examples and the exercises we may need arithmetics and mathematical functions.</p>
<p>We have already used some basic arithmetics such as addition (<code>+</code>) or the power function (<code>^</code>) in the previous lessens. A full list can be found on the <em>R</em> documentation <code>?Arithmetic</code> (or <code>help(Arithmetic)</code>). In addition to that we may use basic mathematical functions such as sine and cosine (<code>sin</code>, <code>cos</code>), the exponential and natural logarithmic function (<code>exp</code>, <code>log</code>), or others. A full list can be found on the help page for <code>?Math</code>.</p>
<div id="functions" class="section level2">
<h2><span class="header-section-number">6.1</span> Functions</h2>
<p>Functions and control structures are what make your code more dynamic. In programming, “functional programming” is a programming paradigm, a style how code is written. Rather than writing so called spaghetti code (one line after another after another …) functions and control structures allow one to build code in blocks. Writing functions and control structures makes the difference between a pure user and a developer.</p>
<p>Functional programing helps to keep the code:</p>
<ul>
<li>more structured,</li>
<li>more readable,</li>
<li>and much easier to maintain or find errors.</li>
</ul>
<p>Control structures are typically not used when using the interactive command line, but are essential parts of of <em>each</em> program and software we use.</p>
<p>Functions are sets of instructions which take over specific tasks. One simple example is the function <code>sd</code> which computes the empirical standard deviation of a set of numeric values. Mathematically the standard deviation is defined as:</p>
<p><span class="math inline">\(\text{sd}(x) = \sqrt{\frac{1}{N - 1} \sum_{i=1}^N (x_i - \bar{x})^2} ~~|~~ i = 1, \dots, N\)</span></p>
<p>Let’s assume we have three numeric vectors and we need the standard deviation from all of them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define some values</span>
x1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>)
x2 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="fl">1.5</span>)
x3 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">5</span>)
<span class="co"># Calculate standard deviation once ...</span>
sd1 &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">sum</span>((x1<span class="op">-</span><span class="kw">mean</span>(x1))<span class="op">^</span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x1)<span class="op">-</span><span class="dv">1</span>))
<span class="co"># ... and again, ...</span>
sd2 &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">sum</span>((x2<span class="op">-</span><span class="kw">mean</span>(x2))<span class="op">^</span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x2)<span class="op">-</span><span class="dv">1</span>))
<span class="co"># ... and again ...</span>
sd3 &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">sum</span>((x3<span class="op">-</span><span class="kw">mean</span>(x3))<span class="op">^</span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x3)<span class="op">-</span><span class="dv">1</span>))
<span class="kw">print</span>(<span class="kw">c</span>(sd1, sd2, sd3))</code></pre></div>
<pre><code>## [1] 0.9135039 1.6645495 5.4322861</code></pre>
<p>… even if the equation for the standard deviation is rather simple you can easily see that the code is quickly getting complex and prone to errors! Rather than doing this spaghetti-style-coding we write ourself a function. Well, <code>sd</code> is a mathematical function from <em>R</em> base, but here we will use a simple hand-written sd function (I call it <code>sdfun</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define the function once:</span>
sdfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="kw">return</span>(<span class="kw">sqrt</span>(<span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))<span class="op">^</span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)))
}
<span class="co"># Define some values</span>
x1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>)
x2 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="fl">1.5</span>)
x3 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">5</span>)
<span class="co"># Calculate standard deviation</span>
sd1 &lt;-<span class="st"> </span><span class="kw">sdfun</span>(x1)
sd2 &lt;-<span class="st"> </span><span class="kw">sdfun</span>(x2)
sd3 &lt;-<span class="st"> </span><span class="kw">sdfun</span>(x3)
<span class="kw">print</span>(<span class="kw">c</span>(sd1, sd2, sd3))</code></pre></div>
<pre><code>## [1] 0.8895834 1.5284751 5.3359076</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Or even</span>
<span class="kw">print</span>(<span class="kw">c</span>(<span class="kw">sdfun</span>(x1), <span class="kw">sdfun</span>(x2), <span class="kw">sdfun</span>(x3)))</code></pre></div>
<pre><code>## [1] 0.8895834 1.5284751 5.3359076</code></pre>
</div>
<div id="when-should-i-use-functions" class="section level2">
<h2><span class="header-section-number">6.2</span> When should I use functions?</h2>
<p>A good indicator is if you start <strong>copy &amp; paste</strong> code! Copy &amp; paste means that you quite likely use the same thing (or something very similar) over and over again. Thus, think of writing a function instead! Functions can be rather simple, or already more complex allowing to control them in a way that they do the same thing but with slightly different conditions. This is done by adding additional input arguments to the function which allows one to control the function (control arguments).</p>
<p>As soon as your <strong>code is getting</strong> more <strong>complicated</strong>: think of extracting some blocks/essential parts and put them into functions. The functions can be stored in extra script files which drastically reduces the number of lines of code in your main script and increases the readability. This helps <em>a lot</em>!</p>
<p>Whenever you have a block of <strong>code you may reuse in the future</strong>, or a <strong>block of code</strong> you double-checked and you are <strong>sure it works well</strong>: you may pack it into functions. This allows you to reuse the function in the future, and, when searching for errors, you may not have to check the code inside these functions as you are sure that they work as expected.</p>
</div>
<div id="the-structure-of-functions" class="section level2">
<h2><span class="header-section-number">6.3</span> The structure of functions</h2>
<p>Functions consist of three key elements. These are:</p>
<ul>
<li><strong>input arguments</strong></li>
<li><strong>instructions</strong></li>
<li><strong>output or return values</strong></li>
</ul>
<p>All three are optional. Well, if you have a function without instructions, the function does absolutely nothing and would be completely useless, however, technically an empty function can be created.</p>
<p>Input and output are also optional. You may have a function which has input arguments but no output (e.g., a function that saves data to a file), or no input but output (e.g., a function that reads data from a standard file). However, these are special cases.</p>
<p>Typically functions have at least <strong>inputs</strong> and <strong>instructions</strong>, and most will also <strong>return</strong> a result or at least an indication that the function successfully executed the instructions.</p>
</div>
<div id="functions-in-r" class="section level2">
<h2><span class="header-section-number">6.4</span> Functions in <em>R</em></h2>
<p>As we have learned in an earlier session nearly anything in <em>R</em> is an object. Functions are first class objects as well and can be used as all the other objects or variables. This allows one to pass functions as input to other function which is frequently used and an important feature in <em>R</em>, even if it might be a bit confusing to people coming from other programming languages.</p>
<p>Functions can of course also be nested (a function calls another function as part of the instructions), and functions can be used recursively (one function may call itself several times) which is useful for some tasks.</p>
<p>Functions are often encapsulated (they take their input, do something, and return a result without touching all the objects on the workspace). However, they do not have to be encapsulated! <em>R</em> uses lexical scoping and functions may access variables on the workspace and/or other environments. This can be very useful, but also a bit confusing.</p>
</div>
<div id="calling-functions" class="section level2">
<h2><span class="header-section-number">6.5</span> Calling functions</h2>
<p>Function calls are indicated by round brackets (<code>(...)</code>). We have already used a range of functions such as <code>seq(...)</code>, <code>mean(...)</code>, <code>is.numeric(...)</code>, <code>as.numeric(...)</code>, or <code>plot(...)</code> over the past weeks. A side note: <em>R</em> differs between functions and so called generic functions. Generic functions act differently depending on the input. For example, <code>summary(c(&quot;A&quot;,&quot;B&quot;,&quot;A&quot;,&quot;B&quot;))</code> and <code>summary(1:50)</code> act different on character vectors and numeric vectors. We will learn something about generic functions in another session.</p>
</div>
<div id="naming-functions" class="section level2">
<h2><span class="header-section-number">6.6</span> Naming functions</h2>
<p>You can basically use any name (as long as it is a valid variable/function name). However, <strong>you may overwrite existing functions</strong> if the function name already exists! Thus, use meaningful, clear, and unique names and try not to name all your functions <code>f</code> and <code>fun</code> and don’t use existing names such as <code>mean</code> or <code>plot</code> (except you know what you do).</p>
<p>In <em>R</em> variables and functions with the same name can co-exist, e.g.,:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)
<span class="kw">mean</span>(mean)</code></pre></div>
<pre><code>## [1] 3.5</code></pre>
<p>Here we define a numeric vector <code>mean</code> and calculate the arithmetic mean by calling <code>mean(mean)</code>. <em>R</em> calls the function <code>mean</code> using the vector <code>mean</code>. Even if this works <strong>try to avoid such constructs</strong>!</p>
</div>
<div id="functions-in-real-life" class="section level2">
<h2><span class="header-section-number">6.7</span> Functions In Real Life</h2>
<p>We all come across function-like situations in our daily life multiple times a day. One illustrative example are backing recipes. Imagine you are cooking some brownies:</p>
<div style="text-align: center;">
<p><img style="width: 60%;" src="images/03/03_recipe.jpg"></p>
</div>
<p>Classical recipes are set up as follows:</p>
<ul>
<li>A list of the required ingredients (our <strong>inputs</strong>)</li>
<li>A set of <strong>instructions</strong> (mix this, do that, bake for 180 minutes)</li>
<li>And a delicious foto. Or, if you cook it, some nice food! That’s the <strong>result</strong> or <strong>output</strong>.</li>
</ul>
<p>We can even find more analogies on this screenshot:</p>
<ul>
<li>The name of the recipe is like the function name, the website where we have found the recipe is the name of the <em>R</em> package (if the function is included in a package).</li>
</ul>
<div style="text-align: center;">
<p><img style="width: 60%;" src="images/03/03_recipe2.jpg"></p>
</div>
<p>Thus, every time we call this “function” (use this recipe) with this very specific name (Cocoa Brownies) from this specific package (or site, the food network) using the inputs (ingredients) as specified we will always get the same result. And that’s what functions do.</p>
</div>
<div id="declare-functions-in-r" class="section level2">
<h2><span class="header-section-number">6.8</span> Declare Functions in <em>R</em></h2>
<p>Let’s begin with an empty function. As mentioned previously all parts of a function (input, instructions, and output) are optional. If we don’t declare all three, that is what we will end up:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myfun &lt;-<span class="st"> </span><span class="cf">function</span>() {
    <span class="co"># Instructions</span>
}</code></pre></div>
<p>We define a new function called <code>myfun</code> by assigning a new <code>function()</code> to the variable <code>myfun</code> as you would do it with e.g., numeric values (<code>x &lt;- 3</code>). Function inputs will be declared within the round brackets <code>()</code>, but this function has no inputs. The instructions are defined inside the curly brackets <code>{...}</code>, in this example it is simply a comment (no code; no instructions). And last but not least, the function does not <code>return</code> anything at the end.</p>
<p>However, we just defined our first custom function! As for all other objects we can examine the object using default methods such as <code>class</code> and <code>is.function</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the class of myfun</span>
<span class="kw">class</span>(myfun)</code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Check if is function</span>
<span class="kw">is.function</span>(myfun)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>To be precise: functions <em>always</em> return something even if nothing is explicitly declared as in our empty function <code>myfun</code>. Returns may be invisible as in this case, but <em>R</em> returns something. Let’s store the return on <code>x</code> and see what we got:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Declare function</span>
myfun &lt;-<span class="st"> </span><span class="cf">function</span>() {
    <span class="co"># Instructions</span>
}
<span class="co"># Store return on x</span>
x &lt;-<span class="st"> </span><span class="kw">myfun</span>()
<span class="co"># Examine</span>
<span class="kw">print</span>(x)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x)</code></pre></div>
<pre><code>## [1] &quot;NULL&quot;</code></pre>
<p>Our empty function returns a <code>NULL</code> (an object of class <code>&quot;NULL&quot;</code>).</p>
</div>
<div id="the-null-value-in-r" class="section level2">
<h2><span class="header-section-number">6.9</span> The NULL value in <em>R</em></h2>
<p>The <code>NULL</code> value in <em>R</em> is what the <code>None</code> type is in python. It is basically an object which tells us that it does not contain anything (so <code>NULL</code> basically means “nothing”). <code>NULL</code> objects are used quite regularly and we might, every now and then, check for <code>is.null</code> to check if we got an empty object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define variable</span>
x &lt;-<span class="st"> </span><span class="ot">NULL</span>
<span class="co"># Print</span>
<span class="kw">print</span>(x)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Check if is null</span>
<span class="kw">is.null</span>(x)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="back-to-functions" class="section level2">
<h2><span class="header-section-number">6.10</span> Back to functions</h2>
<p>Let us write some more useful functions.</p>
<ul>
<li><strong>Input:</strong> no input</li>
<li><strong>Instructions:</strong> print a string</li>
<li><strong>Output:</strong> no output</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Declare the function</span>
myfun &lt;-<span class="st"> </span><span class="cf">function</span>() {
    <span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)
}
<span class="co"># Call function</span>
<span class="kw">myfun</span>()</code></pre></div>
<pre><code>## [1] &quot;Hello World!&quot;</code></pre>
<p>We can call our new <code>myfun</code> function by typing <code>myfun()</code> into the console. As we have no input, nothing has to be declared between the brackets (we are not even allowed to do so). As soon as called the function executes the instructions. Here, the string <code>&quot;Hello World!&quot;</code> is printed.</p>
<p>Again, we have not explicitly declared an output or return value, but <em>R</em> returns us something:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Store return value/output</span>
x &lt;-<span class="st"> </span><span class="kw">myfun</span>()</code></pre></div>
<pre><code>## [1] &quot;Hello World!&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(x)</code></pre></div>
<pre><code>## [1] &quot;Hello World!&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>As we can see the return, which is assigned to our variable <code>x</code>, contains the very same character string the function printed. <strong>Why?</strong> Well, this is a bit tricky to understand. <em>R</em> always returns the last return it can find. <code>print(...)</code> invisibly returns what it just printed. Thus, the last return was the string itself (even if we did not see it), wherefore our <code>myfun</code> function also returns this at the end. It is not important to know the details, but keep that in mind!</p>
<p>We now extend our function and provide an input argument:</p>
<ul>
<li><strong>Input:</strong> one argument called <code>x</code></li>
<li><strong>Instructions:</strong> combine two character strings (<code>paste</code>) and print it</li>
<li><strong>Output:</strong> no explicit return value</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Declare the function</span>
myfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;Good morning&quot;</span>, x))
}
<span class="co"># Call function</span>
<span class="kw">myfun</span>(<span class="st">&quot;Jochen&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Good morning Jochen&quot;</code></pre>
<p>We can now call our function <code>myfun</code> and provide (required) one input, let’s use the character string <code>&quot;Jochen&quot;</code> for now. The function now takes this input argument and stores it - internally - on the name <code>x</code> (as we named our input <code>x</code>). Given the instructions the function combines the two character strings <code>&quot;Good morning&quot;</code> and <code>x</code> and prints the result.</p>
<p>Once defined we can now reuse our function <code>myfun</code> with different inputs:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">myfun</span>(<span class="st">&quot;Helga&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Good morning Helga&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">myfun</span>(<span class="st">&quot;Jose&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Good morning Jose&quot;</code></pre>
<p>Define a return value:</p>
<ul>
<li><strong>Input:</strong> one argument called <code>x</code></li>
<li><strong>Instructions:</strong> combine two character strings (<code>paste</code>) and print it</li>
<li><strong>Output:</strong> return the number of characters of the pasted string</li>
</ul>
<p>Again, extend the function from above. We now define an explicit return value. But rather than just returning the combined string we are interested in the number of characters the string had.</p>
<p>The instructions:</p>
<ul>
<li>paste the two character strings <code>&quot;Good evening&quot;</code> and <code>x</code> and store the new character string on a variable called <code>tmp</code></li>
<li>print the string <code>tmp</code></li>
<li>count the number of characters of the string <code>tmp</code> (that’s what <code>nchar</code> does; <em>number of characters</em>)</li>
<li>… and return this number, an positive integer.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Declare the function</span>
myfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    <span class="co"># Create the string</span>
    tmp &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Good evening&quot;</span>, x)
    <span class="co"># Print string</span>
    <span class="kw">print</span>(tmp)
    <span class="co"># Return number of characters</span>
    res &lt;-<span class="st"> </span><span class="kw">nchar</span>(tmp)
    <span class="kw">return</span>(res)
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Call function, store result</span>
x &lt;-<span class="st"> </span><span class="kw">myfun</span>(<span class="st">&quot;Jochen&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Good evening Jochen&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Print result</span>
<span class="kw">print</span>(x)</code></pre></div>
<pre><code>## [1] 19</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Class</span>
<span class="kw">class</span>(x)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>Et voila, our first “useful” function with inputs, instructions, and an explicitly defined return value or output. ### Different formulations</p>
<p>In <em>R</em> things can often be written in slightly different ways. This also yields for function definitions. Even if they are all valid and do the very same thing, some of them are not recommended at all. What I recommend is to always explicitly use the <code>return(...)</code> command because it makes it much easier for you and all others reading your code to identify what will be returned (increase readability)</p>
<p>Furthermore, except for very short functions, always use the curly brackets <code>{...}</code> as they structure your code. You can easily identify the instructions as they are written between brackets. For multi-line functions this is required anyways.</p>
<p><strong>Version 1:</strong> <span style="color: green;">(recommended)</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">powfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    <span class="kw">return</span>(x<span class="op">^</span><span class="dv">2</span>)
}</code></pre></div>
<p><strong>Version 2:</strong> as a one-liner <span style="color: green;">(recommended)</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">powfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) { <span class="kw">return</span>(x<span class="op">^</span><span class="dv">2</span>) }</code></pre></div>
<p><strong>Version 3:</strong> without brackets <span style="color: orange;">(ok for short functions)</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">powfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">return</span>(x<span class="op">^</span><span class="dv">2</span>)</code></pre></div>
<p><strong>Version 4:</strong> without brackets, no explicit return <span style="color: red;">(not recommended)</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">powfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span></code></pre></div>
<p><strong>Version 4:</strong> without brackets, no explicit return <span style="color: red;">(not recommended)</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">powfun &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    x<span class="op">^</span><span class="dv">2</span>
}</code></pre></div>
<div id="multiple-input-arguments" class="section level3">
<h3><span class="header-section-number">6.10.1</span> Multiple input arguments</h3>
<p>Functions can have multiple input arguments and they do not have to be named <code>x</code> (even if often used as the first argument). The following simple function has two inputs, one called <code>greeting</code>, and one called <code>name</code>. We are expecting two strings, paste them together (<code>paste</code>), and return the new character string. In contrast to the functions shown earlier in this document the function itself does not print the new string, but returns it at the end of the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Function with two required arguments</span>
myfun &lt;-<span class="st"> </span><span class="cf">function</span>(greeting, name) {
    <span class="co"># Store combined string</span>
    res &lt;-<span class="st"> </span><span class="kw">paste</span>(greeting, name)
    <span class="kw">return</span>(res)
}</code></pre></div>
<p>Functions with multiple arguments can be used the very same way, except that we have to provide two input arguments separated by a colon.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Call the function</span>
x &lt;-<span class="st"> </span><span class="kw">myfun</span>(<span class="st">&quot;Welcome to the course,&quot;</span>, <span class="st">&quot;Jordan&quot;</span>)
<span class="kw">print</span>(x)</code></pre></div>
<pre><code>## [1] &quot;Welcome to the course, Jordan&quot;</code></pre>
</div>
</div>
<div id="practical-session-1" class="section level2">
<h2><span class="header-section-number">6.11</span> Practical Session</h2>
<p>Let’s do some practical work in this session.</p>
<div id="exercise-1" class="section level3">
<h3><span class="header-section-number">6.11.1</span> Exercise 1</h3>
<ol style="list-style-type: decimal">
<li>write a function <code>powfun2</code> with one input argument <code>x</code> which returns <span class="math inline">\(x^2\)</span> (<code>?Arithmetic</code>)</li>
<li>write a function <code>powfun4</code> with one input argument <code>x</code> which returns <span class="math inline">\(x^4\)</span></li>
</ol>
<p><strong>Solution:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># One input argument &#39;x&#39;, returns &#39;x^2&#39;</span>
<span class="co"># Input: numeric vector &#39;x&#39;.</span>
<span class="co"># Return: numeric vector of the same</span>
<span class="co"># length, x to the power of 2.</span>
powfun2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="kw">return</span>(x<span class="op">^</span><span class="dv">2</span>)
}
<span class="co"># One input argument, just for demonstration purpuses</span>
<span class="co"># I call it &#39;z&#39; here! Returns input^4, or z^4.</span>
<span class="co"># Input: numeric vector &#39;x&#39;.</span>
<span class="co"># Return: numeric vector of the same</span>
<span class="co"># length, x to the power of 2.</span>
powfun4 &lt;-<span class="st"> </span><span class="cf">function</span>(z) {
  <span class="kw">return</span>(z<span class="op">^</span><span class="dv">4</span>)
}</code></pre></div>
</div>
<div id="exercise-2" class="section level3">
<h3><span class="header-section-number">6.11.2</span> Exercise 2</h3>
<ol style="list-style-type: decimal">
<li>write a function <code>powfun</code> with two input arguments to calculate <span class="math inline">\(x^y\)</span>. Return the result.</li>
</ol>
<p><strong>Solution:</strong> The two functions from exercise 1 are extremely similar, except they use a different power parameter. If you write functions, you may write them as general as necessary. Thus, let us define one function which is able to do both:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Flexible custom power function</span>
<span class="co"># Input: x numeric, the &#39;base&#39;</span>
<span class="co">#        y numeric, the power exponent</span>
<span class="co"># Return: Numeric vector with x^y</span>
powfun &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {
  <span class="kw">return</span>(x<span class="op">^</span>y)
}</code></pre></div>
<p>Note that the function now has two inputs, namely <code>x</code> and <code>y</code>. You could add additional inputs by simply adding them (comma separated), e.g., <code>function(x, y, a, b, foo, bar)</code> if needed.</p>
<p>Testing the functions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 3 to the power of 2</span>
<span class="kw">powfun2</span>(<span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 3 to the power of 4</span>
<span class="kw">powfun4</span>(<span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] 81</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The same with the powfun function:</span>
<span class="kw">powfun</span>(<span class="dv">3</span>, <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">powfun</span>(<span class="dv">3</span>, <span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] 81</code></pre>
</div>
<div id="exercise-3" class="section level3">
<h3><span class="header-section-number">6.11.3</span> Exercise 3</h3>
<p>Combine exercise 1 &amp; 2:</p>
<ol style="list-style-type: decimal">
<li>overwrite your existing functions <code>powfun2</code> and <code>powfun4</code> by creating new functions with the same name. Rather than calling <code>x^2</code> and <code>x^4</code> explicitly these functions should internally call the function from exercise 2 and return its results (nesting functions, one of your functions internally uses another function).</li>
<li>what happens if the inputs are vectors, what if they are vectors of different lengths?</li>
<li>extend the function from Exercise 2, check you get valid inputs (define ‘valid’ on your own)</li>
</ol>
<p><strong>Solution:</strong> I am sorry this was rather confusing. What I had planned is that you re-declare <code>powfun2</code> and <code>powfun4</code> (overwrite the existing ones) and, internally, call <code>powfun</code> rather than hard-coding <code>x^2</code> or <code>x^4</code> inside <code>powfun2</code> and <code>powfun4</code>. So what we do is to define <code>powfun2 &lt;- function(x) { ... }</code> but now call <code>powfun</code> inside (so include <code>powfun</code> in the instructions <code>{...}</code>).</p>
<p>For the new <code>powfun2</code>: As we would like to “return the input to the power of two”, we use “2” as the second input argument to “powfun”. As the first input we forward <code>x</code>. What happens is that we call <code>powfun2</code> with some data on input <code>x</code>. <code>powfun2</code> does not do anything with <code>x</code> but directly “forwards” it to the <code>powfun</code> function (as first input argument to <code>powfun</code>). The second input is “2” (always 2 in this case):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Re-declare functions</span>
powfun2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="co"># Call powfun: forward &quot;x&quot;, set the second argument to &quot;2&quot;</span>
  <span class="co"># &quot;powfun&quot; does the calculation for us.</span>
  res &lt;-<span class="st"> </span><span class="kw">powfun</span>(x, <span class="dv">2</span>)
  <span class="kw">return</span>(res)
}</code></pre></div>
<p>The very same for the new <code>powfun4</code> but using “4” as the second argument when calling the <code>powfun</code> function (inside <code>powfun4</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Re-declare functions</span>
powfun2 &lt;-<span class="st"> </span><span class="cf">function</span>(z) {
  <span class="co"># Call powfun: forward &quot;z&quot;, set the second argument to &quot;2&quot;</span>
  <span class="co"># &quot;powfun&quot; does the calculation for us.</span>
  res &lt;-<span class="st"> </span><span class="kw">powfun</span>(z, <span class="dv">2</span>)
  <span class="kw">return</span>(res)
}</code></pre></div>
<p>Again, I used <code>z</code> as input here to illustrate that the input of the function <code>powfun2</code> is a different object/variable than the input <code>x</code> on <code>powfun(x, y)</code>.</p>
<p>What happens if call <code>powfun</code> with two vectors (for the two inputs) of different lengt? If <code>x</code> is of length <code>1</code> or <code>y</code> is of length <code>1</code> it is kind of obvious:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First argument 2, second argument is c(2,3,4)</span>
<span class="kw">powfun</span>(<span class="dv">2</span>, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</code></pre></div>
<pre><code>## [1]  4  8 16</code></pre>
<p>The result is a vector c(<span class="math inline">\(2^2\)</span>, <span class="math inline">\(2^3\)</span>, <span class="math inline">\(2^4\)</span>) (base is always <code>2</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First argument a vector c(2,3,4), second argument is 2:</span>
<span class="kw">powfun</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1]  4  9 16</code></pre>
<p>The result is a vector c(<span class="math inline">\(2^2\)</span>, <span class="math inline">\(3^2\)</span>, <span class="math inline">\(4^2\)</span>) (power exponent is always <code>2</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First argument a vector c(2,3,4),</span>
<span class="co"># the second argument is a vector c(4,3,2):</span>
<span class="kw">powfun</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>))</code></pre></div>
<pre><code>## [1] 16 27 16</code></pre>
<p>Now <em>R</em> performs element-wise or pair-wise calculation. Thus, the result is a vector c(<span class="math inline">\(2^4\)</span>, <span class="math inline">\(3^3\)</span>, <span class="math inline">\(4^2\)</span>).</p>
<p>Less obvious: if the first argument is of length 2, the second one of length 4, or the other way around.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First argument a vector c(2,3)</span>
<span class="co"># the second argument is a vector c(2,3,4,5):</span>
<span class="kw">powfun</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</code></pre></div>
<pre><code>## [1]   4  27  16 243</code></pre>
<p>The first vector is recycled to match the length of the second vector! Thus R is actually calculating <code>c(2, 3, 2, 3)^(2, 3, 4, 5)</code> and we get c(<span class="math inline">\(2^2\)</span>, <span class="math inline">\(3^3\)</span>, <span class="math inline">\(2^4\)</span>, <span class="math inline">\(3^5\)</span>). This is not how I would use such a function, but to demonstrate what <em>R</em> does in these cases.</p>
<p>Similar in this case:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First argument a vector c(2,3,4,5)</span>
<span class="co"># the second argument is a vector c(2,3):</span>
<span class="kw">powfun</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>))</code></pre></div>
<pre><code>## [1]   4  27  16 125</code></pre>
<p>The second vector is recycled to match the length of the first vector! Thus R is actually calculating <code>c(2, 3, 4, 5)^(2, 3, 2, 3)</code> (c(<span class="math inline">\(2^2\)</span>, <span class="math inline">\(3^3\)</span>, <span class="math inline">\(4^2\)</span>, <span class="math inline">\(5^3\)</span>)).</p>
<p>If the two length of the vectors is not a multiple of the first one, e.g, the first is of length 2, the second of length 3, <em>R</em> still tries to recycle the short one, but will warn you that this is not possible.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">powfun</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</code></pre></div>
<pre><code>## Warning in x^y: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>## [1]  4 27 16</code></pre>
<p>Checking inputs: we will learn about this in the next session, as we will make use of conditions and other control structures.</p>

<p>Rendered: 2019-09-08 on <em>marvin</em></p>
</div>
</div>
<div id="function-recap" class="section level2">
<h2><span class="header-section-number">6.12</span> Function Recap</h2>
<p>Just a short repetition of writing functions in <em>R</em>. During the last practical session but also when going trough your submissions on Session 03 Exercise A-C I’ve seen a lot of functions using Rs so called “lexical scoping” feature. Even if this works it is “not recommended to use” (at least not for beginners as it might be confusing very quickly). The following two images show two <em>R</em> functions. The first one is the suggested way to write functions.</p>
<div style="text-align: center;">
<p><img style="width: 60%;" src="images/04/04_scoping_A2.png"></p>
</div>
<p><strong>Explanation:</strong> The function is, again, the simple power function we have used several times. The function takes two inputs, namely <code>x</code> and <code>power</code> and returns <code>x^power</code> at the end. Outside the function we define a <code>x</code> and a <code>y</code>, call the function, and store the result (the return of the function) on <code>z</code>. Several things to mention here:</p>
<ul>
<li>Everything you use in the function <em>should be explicitly defined as input to the function</em> (here <code>x</code> and <code>power</code>).</li>
<li>The objects <code>x</code> and <code>power</code> inside the function are only available inside the function (the gray box is kind of a “function container” or “box”).</li>
<li>The object <code>x</code> (red) defined <em>outside the function</em> is not the same as the object <code>x</code> (turquoise) inside the function! Don’t mix them up. The “red” <code>x</code> is defined in our workspace. We forward the value of the “red” <code>x</code> to the function as the first input argument. Inside the function the first input argument is also called <code>x</code> but is not the “red” <code>x</code>. This is a new object (thus, turquoise) and gets the same value as the “red” <code>x</code>.</li>
<li>The second element of the function (<code>power</code>) is not defined in the workspace but gets the value of <code>y</code> as we call the function with <code>powfun(x, y)</code>. The function inputs do not have to match the objects outside the function.</li>
</ul>
<div style="text-align: center;">
<p><img style="width: 60%;" src="images/04/04_scoping_B2.png"></p>
</div>
<p><strong>Explanation:</strong> This shows what we <em>should not do</em>. Scoping is a thing, but Try not to use it and try to understand what’s happening if you do. In this case the function is even wrong. What we wanted to do is to have a function which has two inputs and returns the first input (<code>x</code>) to the power of the second input (<code>power</code>). However, if you look closely we actually do something different.</p>
<ul>
<li>On our workspace we have two objects <code>x</code> and <code>y</code>. We then (as in the example above) call our function with <code>x</code> and <code>y</code> as inputs. So far, so good.</li>
<li>The function now gets the input <code>x</code> and <code>power</code> (with the values from the two objects on our workspace), however <strong>the function returns <code>x^y</code> instead of <code>x^power</code></strong>! Why does it still work? Scoping!</li>
<li>We are using an object <code>y</code> inside the function, which has <strong>never explicitly been defined as an input to the function</strong>. <em>R</em> now tries to find <code>y</code> and will find one defined on in our workspace (the “orange” one) and uses this one. Thus, the function works and - in this case - returns the correct result, but <strong>due to the wrong reason</strong>!.</li>
<li>The <code>power</code> input is never used at all.</li>
<li>Try to imagine what will happen if you now call <code>function(2, 2)</code>. Instead of returning <code>4</code> (<code>2^2</code>) the result on <code>z</code> will be <code>5.6568</code> as the function returns <code>2^y = 2^2.6 = 5.6568</code>.</li>
</ul>
<p>Thus, always (always) define all variables you use inside functions as explicit input arguments. And check your functions such that you only use objects you specified as input arguments!</p>
</div>
<div id="developing-functions" class="section level2">
<h2><span class="header-section-number">6.13</span> Developing Functions</h2>
<div id="develop-functions-in-steps" class="section level3">
<h3><span class="header-section-number">6.13.1</span> Develop functions in steps</h3>
<p>For those who have had troubles writing functions: try to develop your functions in some kind of a multi-step approach by doing the following:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Start with a fresh script and develop your code without functions first.</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>As soon as everything works as it should, pack parts of the code into functions.</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Adjust and check your function. ### Step 1: start without functions</li>
</ol></li>
</ul>
<p>As an example of a multi-step approach let’s use the example from Session 02. I start with a fresh script and develop my code to find all females in the data set which are taller than the smallest man:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">objects</span>())        <span class="co"># Clear the whole workspace</span>
<span class="kw">load</span>(<span class="st">&quot;height_extended.rds&quot;</span>) <span class="co"># Loading the data set</span>
<span class="kw">objects</span>()                   <span class="co"># Check objects</span></code></pre></div>
<pre><code>## [1] &quot;age&quot;    &quot;gender&quot; &quot;height&quot; &quot;name&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Smallest male person</span>
smallest_male &lt;-<span class="st"> </span><span class="kw">min</span>(height[gender <span class="op">==</span><span class="st"> &quot;m&quot;</span>])
<span class="kw">print</span>(smallest_male)</code></pre></div>
<pre><code>## [1] 166</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Find females taller than smallest male, store index</span>
idx &lt;-<span class="st"> </span><span class="kw">which</span>(gender <span class="op">==</span><span class="st"> &quot;f&quot;</span> <span class="op">&amp;</span><span class="st"> </span>height <span class="op">&gt;</span><span class="st"> </span>smallest_male)
<span class="kw">print</span>(idx)</code></pre></div>
<pre><code>## [1]  7 59</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(name[idx])</code></pre></div>
<pre><code>## [1] &quot;Elisabeth&quot; &quot;Julia&quot;</code></pre>
</div>
<div id="step-2-pack-parts-of-your-code-into-a-function" class="section level3">
<h3><span class="header-section-number">6.13.2</span> Step 2: pack parts of your code into a function</h3>
<p>That works as expected! As I am now sure that the code runs and that my script does what it has to do I can pack it into a function. Note that the commands to clear the work space and the one command to load the data set will be outside the function, the function should only find the tall females.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">objects</span>())        <span class="co"># Clear the whole workspace</span>
<span class="kw">load</span>(<span class="st">&quot;height_extended.rds&quot;</span>) <span class="co"># Loading the data set</span>
<span class="co"># Find females taller than the smallest male person</span>
tall_females &lt;-<span class="st"> </span><span class="cf">function</span>(height, gender, name) {
  <span class="co"># Smallest male person</span>
  smallest_male &lt;-<span class="st"> </span><span class="kw">min</span>(height[gender <span class="op">==</span><span class="st"> &quot;m&quot;</span>])

  <span class="co"># Find females taller than smallest male, store index</span>
  idx &lt;-<span class="st"> </span><span class="kw">which</span>(gender <span class="op">==</span><span class="st"> &quot;f&quot;</span> <span class="op">&amp;</span><span class="st"> </span>height <span class="op">&gt;</span><span class="st"> </span>smallest_male)
  <span class="kw">print</span>(name[idx])
}

<span class="co"># Call function:</span>
<span class="kw">tall_females</span>(height, gender, name)</code></pre></div>
<pre><code>## [1] &quot;Elisabeth&quot; &quot;Julia&quot;</code></pre>
</div>
<div id="step-3-adjust-your-function" class="section level3">
<h3><span class="header-section-number">6.13.3</span> Step 3: adjust your function</h3>
<p>Well, that looks good so far, but now we have to adjust our function. In this case I’ve renamed my inputs (now <code>hgt</code>, <code>sex</code>, and <code>name</code>). <strong>WARNING:</strong> as soon as you rename your inputs: adjust your code such that it only uses these new objects (and not the old names, e.g., <code>height</code>). If you would use <code>height</code> inside the function you’ll run into the scoping problem again! In addition, I’ve added some <strong>input checks</strong> and an explicit <strong>return</strong> command at the end of the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">objects</span>())        <span class="co"># Clear the whole workspace</span>
<span class="kw">load</span>(<span class="st">&quot;height_extended.rds&quot;</span>) <span class="co"># Loading the data set</span>
<span class="co"># Smallest male person</span>
tall_females &lt;-<span class="st"> </span><span class="cf">function</span>(hgt, sex, name) {
  <span class="co"># Check inputs</span>
  <span class="cf">if</span>(<span class="kw">length</span>(hgt) <span class="op">!=</span><span class="st"> </span><span class="kw">length</span>(sex) <span class="op">|</span><span class="st"> </span><span class="kw">length</span>(hgt) <span class="op">!=</span><span class="st"> </span><span class="kw">length</span>(name)) {
    <span class="kw">stop</span>(<span class="st">&quot;Input arguments have to be of the same length&quot;</span>)
  }
  <span class="co"># Find body size of smallest male person</span>
  smallest_male &lt;-<span class="st"> </span><span class="kw">min</span>(hgt[sex <span class="op">==</span><span class="st"> &quot;m&quot;</span>])
  <span class="co"># Find females taller than smallest male, store index</span>
  idx &lt;-<span class="st"> </span><span class="kw">which</span>(sex <span class="op">==</span><span class="st"> &quot;f&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hgt <span class="op">&gt;</span><span class="st"> </span>smallest_male)
  <span class="co"># Return names (character) of females &gt; smallest male</span>
  <span class="kw">return</span>(name[idx])
}

<span class="co"># Call function:</span>
<span class="kw">tall_females</span>(height, gender, name)</code></pre></div>
<pre><code>## [1] &quot;Elisabeth&quot; &quot;Julia&quot;</code></pre>
</div>
</div>
<div id="advanced-use-script-files" class="section level2">
<h2><span class="header-section-number">6.14</span> Advanced: use script files</h2>
<p>More advanced: I could now also copy the function into a second <code>.R</code> script file which takes up all my functions. Once I moved the function to another script I do have to <code>source</code> this script. <code>source</code> executes the script once, in this case <code>example_functions.R</code>. If we would not do that <em>R</em> would not know the function <code>tall_females</code> as it has never been defined!</p>
<p>The cool thing of such function files: you can remove the function from your main script file. Especially if the functions get longer and longer this helps you to keep your main script readable. So far we have not used this, however, feel free to try (and you will, for sure, have to start using it in your coding career).</p>
<p>Your main script would, in this example, look as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">objects</span>())        <span class="co"># Clear the whole workspace</span>
<span class="kw">load</span>(<span class="st">&quot;height_extended.rds&quot;</span>) <span class="co"># Loading the data set</span>

<span class="co"># Copied the function into a second file called &quot;example_functions.R&quot;.</span>
<span class="co"># Source function file (loads the function into the workspace)</span>
<span class="kw">source</span>(<span class="st">&quot;example_functions.R&quot;</span>)

<span class="co"># Call function:</span>
<span class="kw">tall_females</span>(height, gender, name)</code></pre></div>
<pre><code>## [1] &quot;Elisabeth&quot; &quot;Julia&quot;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="style-guide.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
